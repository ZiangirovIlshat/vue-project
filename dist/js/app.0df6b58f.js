(function(){"use strict";var e={433:function(e,t,a){var s=a(3751),r=a(641);const i={class:"wrapper"};function o(e,t,a,s,o,n){const l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(l)])}var n=a(6278),l=(0,r.pM)({methods:{...(0,n.i0)({fetchUser:"user/fetchUser"})},created(){}}),d=a(6262);const c=(0,d.A)(l,[["render",o]]);var u=c,g=a(5220);a(4603),a(7566),a(8721);const h={namespaced:!0,state:{data:[],loading:!1,error:""},getters:{getRepoById:e=>t=>e.data.find((e=>e.id===t))},mutations:{SET_POSTS_DATA(e,t){e.data=t.items.map((e=>(e.following={status:!1,loading:!1,error:""},e)))},SET_POSTS_LOADING(e,t){e.loading=t},SET_POSTS_ERROR(e,t){e.error=t},SET_README_DATA(e,t){e.data=e.data.map((e=>(t.id===e.id&&(e.readme=t.content),e)))},SET_FOLLOWING_DATA(e,t){e.data=e.data.map((e=>(t.id===e.id&&(e.following={...e.following,...t.data}),e)))}},actions:{async fetchPosts({commit:e}){e("SET_POSTS_LOADING",!0);try{const t=new URL("https://api.github.com/search/repositories");t.searchParams.set("order","desc"),t.searchParams.set("sort","start"),t.searchParams.set("q","language:javascript created:>"+p()),t.searchParams.set("per_page",10);const a=await fetch(t.toString(),{headers:{Authorization:`token ${localStorage.getItem("token")}`}}),s=await a.json();e("SET_POSTS_DATA",s)}catch{e("SET_POSTS_DATA",[])}finally{e("SET_POSTS_LOADING",!1)}},async fetchReadme({commit:e,getters:t},{id:a,owner:s,name:r}){const i=t.getRepoById(a);if(void 0===i.readme)try{const t=await fetch(`https://api.github.com/repos/${s}/${r}/readme`,{headers:{accept:"application/vnd.github.v3.html+json",Authorization:`token ${localStorage.getItem("token")}`}}),i=await t.text();e("SET_README_DATA",{id:a,content:i})}catch(o){throw o}},async setStar({commit:e,getters:t},a){const{name:s,owner:r}=t.getRepoById(a);e("SET_FOLLOWING_DATA",{id:a,data:{status:!1,loading:!0,error:""}});try{await fetch(`https://api.github.com/user/starred/${r.login}/${s}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Length":"0"}}),e("SET_FOLLOWING_DATA",{id:a,data:{status:!0}})}catch{e("SET_FOLLOWING_DATA",{id:a,data:{error:"Не удалось выполнить действие"}})}finally{e("SET_FOLLOWING_DATA",{id:a,data:{loading:!1}})}},async removeStar({commit:e,getters:t},a){const{name:s,owner:r}=t.getRepoById(a);e("SET_FOLLOWING_DATA",{id:a,data:{status:!0,loading:!0,error:""}});try{await fetch(`https://api.github.com/user/starred/${r.login}/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Length":"0"}}),e("SET_FOLLOWING_DATA",{id:a,data:{status:!1}})}catch{e("SET_FOLLOWING_DATA",{id:a,data:{error:"Не удалось выполнить действие"}})}finally{e("SET_FOLLOWING_DATA",{id:a,data:{loading:!1}})}}}};function p(){const e=new Date,t=new Date(e.getTime()-6048e5),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=`${a}-${s}-${r}`;return i}var v=h;const m={namespaced:!0,state:{data:[],loading:!1,error:""},getters:{getRepoById:e=>t=>e.data.find((e=>e.id===t))},mutations:{SET_POSTS_DATA(e,t){e.data=t},SET_ISSUES_DATA(e,t){e.data=e.data.map((e=>(t.id===e.id&&(e.issues=t.content),e)))},SET_POSTS_LOADING(e,t){e.loading=t},SET_POSTS_ERROR(e,t){e.error=t}},actions:{async fetchLikedPosts({commit:e}){try{const t=await fetch("https://api.github.com/user/starred",{headers:{Authorization:`token ${localStorage.getItem("token")}`}}),a=await t.json();if(void 0===a)return void e("SET_POSTS_ERROR","<b>Ой! Что-то пошло не так... :(</b><br>Не удалось получить данные");e("SET_POSTS_DATA",a)}catch(t){e("SET_POSTS_ERROR","<b>Ой! Что-то пошло не так... :(</b><br>Не удалось получить данные")}finally{e("SET_POSTS_LOADING",!1)}},async fetchIssues({commit:e,getters:t},{id:a,owner:s,name:r}){const i=t.getRepoById(a);if(void 0===i.issues)try{const t=await fetch(`https://api.github.com/repos/${s}/${r}/issues`,{headers:{Authorization:`token ${localStorage.getItem("token")}`}}),i=await t.json();e("SET_ISSUES_DATA",{id:a,content:i})}catch(o){throw o}}}};var _=m;const f={namespaced:!0,state:{data:null},mutations:{SET_USER_DATA(e,t){e.data=t}},actions:{async fetchUser({commit:e}){try{const t=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${localStorage.getItem("token")}`}});if(401===t.status)throw new Error;const a=await t.json();e("SET_USER_DATA",a)}catch(t){throw t}}}};var k=f,S=(0,n.y$)({getters:{getUnstarredOnly(e){return e.posts.data.filter((t=>!e.likedPosts.data.some((e=>t.id===e.id))))}},modules:{posts:v,likedPosts:_,user:k}}),L=a(33);const y={key:0,class:"users-stories"},w={class:"users-stories__list"},E={class:"main"},A={class:"posts"},b={class:"posts__container"},T={key:0,class:"posts__loader"},C=["innerHTML"],D={class:"posts__content-wrapper"},I=["innerHTML"],O={class:"posts__details"};function X(e,t,a,s,i,o){const n=(0,r.g2)("logo"),l=(0,r.g2)("mainMenu"),d=(0,r.g2)("userStory"),c=(0,r.g2)("topline"),u=(0,r.g2)("loader"),g=(0,r.g2)("postDetails"),h=(0,r.g2)("post");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(c,null,{headline:(0,r.k6)((()=>[(0,r.bF)(n),(0,r.bF)(l,{avatarUrl:e.user.data.avatar_url},null,8,["avatarUrl"])])),content:(0,r.k6)((()=>[e.posts.data?((0,r.uX)(),(0,r.CE)("div",y,[(0,r.Lk)("ul",w,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.getUnstarredOnly,((t,a)=>((0,r.uX)(),(0,r.CE)("li",{key:t.id},[(0,r.bF)(d,{userName:t.owner.login,avatarUrl:t.owner.avatar_url,onClick:t=>e.handlePress(a)},null,8,["userName","avatarUrl","onClick"])])))),128))])])):(0,r.Q3)("",!0)])),_:1}),(0,r.Lk)("main",E,[(0,r.Lk)("div",A,[(0,r.Lk)("div",b,[e.likedPosts.loading?((0,r.uX)(),(0,r.CE)("div",T,[(0,r.bF)(u)])):e.likedPosts.error?((0,r.uX)(),(0,r.CE)("div",{key:1,class:"posts__err-message",innerHTML:e.likedPosts.error},null,8,C)):e.likedPosts.data?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:2},(0,r.pI)(e.likedPosts.data,(t=>((0,r.uX)(),(0,r.CE)("div",{class:"posts__post-wrapper",key:t.id},[(0,r.bF)(h,{postData:e.getPostData(t)},{content:(0,r.k6)((()=>[(0,r.Lk)("div",D,[(0,r.Lk)("h2",null,(0,L.v_)(t.name),1),(0,r.Lk)("div",{class:"posts__text",innerHTML:t.description},null,8,I),(0,r.Lk)("div",O,[(0,r.bF)(g,{stars:t.stargazers_count,fork:t.forks_count},null,8,["stars","fork"])])])])),_:2},1032,["postData"])])))),128)):(0,r.Q3)("",!0)])])])],64)}a(4114);const R={class:"header"},F={class:"header__container"},P={class:"header__headline"},M={key:0,class:"header__content"};function U(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("header",R,[(0,r.Lk)("div",F,[(0,r.Lk)("div",P,[(0,r.RG)(e.$slots,"headline",{},void 0,!0)]),e.$slots.content?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.RG)(e.$slots,"content",{},void 0,!0)])):(0,r.Q3)("",!0)])])}var x=(0,r.pM)({name:"topline"});const N=(0,d.A)(x,[["render",U],["__scopeId","data-v-36ea4c98"]]);var G=N,z=a.p+"img/Logo.8823e6fd.svg";const j=e=>((0,r.Qi)("data-v-389b5088"),e=e(),(0,r.jt)(),e),Q={class:"logo-wrapper"},B=j((()=>(0,r.Lk)("img",{src:z,alt:"logo"},null,-1)));function W(e,t,a,s,i,o){const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Q,[(0,r.bF)(n,{to:"/"},{default:(0,r.k6)((()=>[B])),_:1})])}var K=(0,r.pM)({name:"logo"});const J=(0,d.A)(K,[["render",W],["__scopeId","data-v-389b5088"]]);var H=J,Y=a.p+"img/sprite.0e6d09f6.svg";const q=e=>((0,r.Qi)("data-v-2ff2daf2"),e=e(),(0,r.jt)(),e),Z=Y+"#home",$=Y+"#exit",V={class:"menu"},ee=q((()=>(0,r.Lk)("svg",{class:"menu__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:Z,x:"0",y:"0"})],-1))),te={class:"menu__img-container"},ae=["src"],se=q((()=>(0,r.Lk)("svg",{class:"menu__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:$,x:"0",y:"0"})],-1))),re=[se];function ie(e,t,a,s,i,o){const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",V,[(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(n,{to:"/"},{default:(0,r.k6)((()=>[ee])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(n,{to:"/"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",te,[(0,r.Lk)("img",{src:e.avatarUrl},null,8,ae)])])),_:1})]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{onClick:t[0]||(t[0]=t=>e.exit())},re)])])])}var oe="data:image/png;base64,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",ne=(0,r.pM)({name:"mainMenu",props:{avatarUrl:{type:String,default:oe}},methods:{exit(){confirm("Вы уверены, что хотите выйти?")&&(localStorage.removeItem("token"),this.$router.push({name:"auth"}))}}});const le=(0,d.A)(ne,[["render",ie],["__scopeId","data-v-2ff2daf2"]]);var de=le;const ce={class:"user-story"},ue={class:"user-story__body"},ge={class:"user-story__avatar"},he={class:"user-story__avatar-body"},pe=["src","alt"],ve={class:"user-story__name"};function me(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",ce,[(0,r.Lk)("div",ue,[(0,r.Lk)("div",ge,[(0,r.Lk)("div",he,[(0,r.Lk)("img",{src:e.avatarUrl,alt:e.userName},null,8,pe)])]),(0,r.Lk)("div",ve,(0,L.v_)(e.userName),1)])])}var _e=(0,r.pM)({name:"userStory",props:{avatarUrl:{type:String,default:oe},userName:{required:!0,type:String,validator:function(e){return e.length>3&&e.length<50}}}});const fe=(0,d.A)(_e,[["render",me],["__scopeId","data-v-552e24f3"]]);var ke=fe;const Se={class:"post"},Le={class:"post__header"},ye={class:"post__content"},we={key:0,class:"toggler"},Ee={key:1,class:"post__issues"},Ae={key:0,class:"post__preloader"},be=["innerHTML"],Te={key:2},Ce={class:"post__date"};function De(e,t,a,s,i,o){const n=(0,r.g2)("userDetails"),l=(0,r.g2)("toggler"),d=(0,r.g2)("preloader");return(0,r.uX)(),(0,r.CE)("div",Se,[(0,r.Lk)("div",Le,[(0,r.bF)(n,{userName:e.postData.ownerLogin,avatarUrl:e.postData.ownerAvatar},null,8,["userName","avatarUrl"])]),(0,r.Lk)("div",ye,[(0,r.RG)(e.$slots,"content",{},void 0,!0)]),e.postData.issuesIsTrue?((0,r.uX)(),(0,r.CE)("div",we,[(0,r.bF)(l,{onOnToggle:e.toggle},null,8,["onOnToggle"])])):(0,r.Q3)("",!0),e.shown?((0,r.uX)(),(0,r.CE)("div",Ee,[e.issuesLoading?((0,r.uX)(),(0,r.CE)("div",Ae,[(0,r.bF)(d)])):e.issuesError?((0,r.uX)(),(0,r.CE)("div",{key:1,class:"post__err-message",innerHTML:e.issuesError},null,8,be)):e.postData.issuesContent?((0,r.uX)(),(0,r.CE)("ul",Te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.postData.issuesContent,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id},[(0,r.Lk)("b",null,(0,L.v_)(e.user.login),1),(0,r.eW)(" "+(0,L.v_)(e.title),1)])))),128))])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.Lk)("p",Ce,(0,L.v_)(e.getFormattedDate(e.postData.createdAt)),1)])}const Ie={class:"user-details"},Oe={class:"user-details__avatar"},Xe=["src","alt"],Re={class:"user-details__name"};function Fe(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",Ie,[(0,r.Lk)("div",Oe,[(0,r.Lk)("img",{src:e.avatarUrl,alt:e.userName},null,8,Xe)]),(0,r.Lk)("p",Re,(0,L.v_)(e.userName),1)])}var Pe=(0,r.pM)({name:"userDetails",props:{avatarUrl:{type:String,default:oe},userName:{required:!0,type:String,validator:function(e){return e.length>3&&e.length<50}}}});const Me=(0,d.A)(Pe,[["render",Fe],["__scopeId","data-v-0acdfa9c"]]);var Ue=Me;const xe=e=>((0,r.Qi)("data-v-0bac3753"),e=e(),(0,r.jt)(),e),Ne=Y+"#arrow",Ge=xe((()=>(0,r.Lk)("span",{class:"toggler__arrow"},[(0,r.Lk)("svg",{class:"toggler__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:Ne,x:"0",y:"0"})])],-1)));function ze(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("button",{class:(0,L.C4)(["toggler",{__active:e.isOpened}]),onClick:t[0]||(t[0]=t=>e.toggle())},[(0,r.Lk)("span",null,(0,L.v_)(this.isOpened?"Hide issues":"View issues"),1),Ge],2)}var je=(0,r.pM)({name:"toggler",data(){return{isOpened:!1}},methods:{toggle(){this.isOpened=!this.isOpened,this.$emit("onToggle",this.isOpened)}}});const Qe=(0,d.A)(je,[["render",ze],["__scopeId","data-v-0bac3753"]]);var Be=Qe;const We=e=>((0,r.Qi)("data-v-35f40f7a"),e=e(),(0,r.jt)(),e),Ke={class:"preloader"},Je=We((()=>(0,r.Lk)("div",{class:"preloader__item"},null,-1))),He=[Je];function Ye(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",Ke,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.count,(e=>((0,r.uX)(),(0,r.CE)("ul",{key:e},[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(3,(e=>(0,r.Lk)("li",{key:e},He))),64))])))),128))])}var qe=(0,r.pM)({name:"preloader",props:{count:{type:Number,default:1}}});const Ze=(0,d.A)(qe,[["render",Ye],["__scopeId","data-v-35f40f7a"]]);var $e=Ze,Ve=(0,r.pM)({name:"post",components:{userDetails:Ue,toggler:Be,preloader:$e},props:{postData:{required:!0,type:Object}},data(){return{shown:!1,issuesError:"",issuesLoading:!1}},computed:{...(0,n.aH)({likedPosts:e=>e.likedPosts}),...(0,n.L8)({getRepoById:"getRepoById"})},methods:{...(0,n.i0)({fetchIssues:"likedPosts/fetchIssues"}),async getIssues(){this.issuesLoading=!0;try{const{id:e,ownerLogin:t,name:a}=this.postData;await this.fetchIssues({id:e,owner:t,name:a})}catch(e){this.issuesError="Не удалось получить вопросы к этому посту"}finally{this.issuesLoading=!1}},getFormattedDate(e){const t=new Date(e),a={day:"numeric",month:"short"},s=t.toLocaleString("en-US",a);return s.toLocaleUpperCase()},toggle(e){this.shown=e,this.getIssues()}}});const et=(0,d.A)(Ve,[["render",De],["__scopeId","data-v-41dfd96a"]]);var tt=et;const at=e=>((0,r.Qi)("data-v-c2743d48"),e=e(),(0,r.jt)(),e),st=Y+"#star",rt=Y+"#fork",it={class:"post-details"},ot=at((()=>(0,r.Lk)("li",{class:"post-details__item"},[(0,r.Lk)("svg",{class:"post-details__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:st,x:"0",y:"0"})]),(0,r.eW)(" Star ")],-1))),nt={class:"post-details__item"},lt=at((()=>(0,r.Lk)("li",{class:"post-details__item"},[(0,r.Lk)("svg",{class:"post-details__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:rt,x:"0",y:"0"})]),(0,r.eW)(" Fork ")],-1))),dt={class:"post-details__item"};function ct(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",it,[(0,r.Lk)("ul",null,[ot,(0,r.Lk)("li",nt,(0,L.v_)(e.stars),1),lt,(0,r.Lk)("li",dt,(0,L.v_)(e.fork),1)])])}var ut=(0,r.pM)({name:"ostDetails",props:{stars:{required:!0,type:Number},fork:{required:!0,type:Number}}});const gt=(0,d.A)(ut,[["render",ct],["__scopeId","data-v-c2743d48"]]);var ht=gt;const pt={class:"loader"};function vt(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",pt,[(0,r.Lk)("div",{class:"loader__spinner",style:(0,L.Tr)({width:e.size+"px",height:e.size+"px",border:"2px solid "+e.color,"border-bottom-color":"transparent"})},null,4)])}var mt=(0,r.pM)({name:"loader",props:{color:{type:String,default:"#31AE54"},size:{type:String,default:"28"}}});const _t=(0,d.A)(mt,[["render",vt],["__scopeId","data-v-3e0fdec8"]]);var ft=_t,kt=(0,r.pM)({name:"feeds",components:{topline:G,logo:H,mainMenu:de,userStory:ke,post:tt,postDetails:ht,loader:ft},data(){return{postsData:null}},computed:{...(0,n.aH)({posts:e=>e.posts,likedPosts:e=>e.likedPosts,user:e=>e.user}),...(0,n.L8)(["getUnstarredOnly"])},methods:{...(0,n.i0)({fetchPosts:"posts/fetchPosts",fetchLikedPosts:"likedPosts/fetchLikedPosts"}),handlePress(e){this.$router.push({name:"stories",params:{initialSlide:e}})},getPostData(e){return{id:e.id,name:e.name,ownerLogin:e.owner.login,ownerAvatar:e.owner.avatar_url,issuesIsTrue:e.open_issues_count>0,issuesContent:e.issues,createdAt:e.created_at}}},created(){this.fetchLikedPosts(),this.fetchPosts()}});const St=(0,d.A)(kt,[["render",X],["__scopeId","data-v-3a40beec"]]);var Lt=St;const yt=e=>((0,r.Qi)("data-v-4170017a"),e=e(),(0,r.jt)(),e),wt=Y+"#close",Et=Y+"#prev",At=Y+"#next",bt={class:"stories"},Tt={class:"stories__header"},Ct=yt((()=>(0,r.Lk)("svg",{class:"menu__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:wt,x:"0",y:"0"})],-1))),Dt=[Ct],It={key:0,class:"stories__loader"},Ot={key:1,class:"slider"},Xt=yt((()=>(0,r.Lk)("svg",{class:"menu__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:Et,x:"0",y:"0"})],-1))),Rt=[Xt],Ft={class:"slider__row"},Pt={class:"slider__items",ref:"sliderRow"},Mt=["onClick"],Ut=yt((()=>(0,r.Lk)("svg",{class:"menu__icon",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:At,x:"0",y:"0"})],-1))),xt=[Ut];function Nt(e,t,a,s,i,o){const n=(0,r.g2)("logoLight"),l=(0,r.g2)("loader"),d=(0,r.g2)("sliderItem");return(0,r.uX)(),(0,r.CE)("div",bt,[(0,r.Lk)("header",Tt,[(0,r.bF)(n),(0,r.Lk)("button",{class:"stories__close-btn",onClick:t[0]||(t[0]=t=>e.close())},Dt)]),e.posts.loading?((0,r.uX)(),(0,r.CE)("div",It,[(0,r.bF)(l)])):((0,r.uX)(),(0,r.CE)("div",Ot,[e.activeSlide>0?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"slider__buttons prev",onClick:t[1]||(t[1]=t=>e.prevBtnClick())},Rt)):(0,r.Q3)("",!0),(0,r.Lk)("div",Ft,[(0,r.Lk)("ul",Pt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.getUnstarredOnly,((t,a)=>((0,r.uX)(),(0,r.CE)("li",{key:t.id,onClick:t=>e.switchSlider(a)},[(0,r.Lk)("div",{class:(0,L.C4)(["slider__slide-wrapper",{__active:e.activeSlide===a}])},[(0,r.bF)(d,{active:e.activeSlide===a,loading:e.activeSlide===a&&e.activeSlideLoading,sliderData:e.getDataForActiveSlide(t),onAnimationFinished:e.switchToNextSlider,onSetStar:e.setStar,onRemoveStar:e.removeStar},null,8,["active","loading","sliderData","onAnimationFinished","onSetStar","onRemoveStar"])],2)],8,Mt)))),128))],512)]),e.activeSlide<e.getUnstarredOnly-1?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"slider__buttons next",onClick:t[2]||(t[2]=t=>e.nextBtnClick())},xt)):(0,r.Q3)("",!0)]))])}var Gt=a.p+"img/LogoLight.0200cf6f.svg";const zt=e=>((0,r.Qi)("data-v-6f259302"),e=e(),(0,r.jt)(),e),jt={class:"logo-wrapper"},Qt=zt((()=>(0,r.Lk)("img",{src:Gt,alt:"logo"},null,-1)));function Bt(e,t,a,s,i,o){const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",jt,[(0,r.bF)(n,{to:"/"},{default:(0,r.k6)((()=>[Qt])),_:1})])}var Wt=(0,r.pM)({name:"logoLight"});const Kt=(0,d.A)(Wt,[["render",Bt],["__scopeId","data-v-6f259302"]]);var Jt=Kt;const Ht={class:"slider-item"},Yt={class:"slider-item__header"},qt={class:"slider-item__progress-bar"},Zt={class:"slider-item__user-details"},$t={class:"slider-item__body"},Vt={key:0,class:"slider-item__prelouder-wrapper"},ea={key:0,class:"slider-item__loader"},ta={key:1,class:"slider-item__content"},aa=["innerHTML"],sa={class:"slider-item__err-message"},ra={class:"slider-item__footer"};function ia(e,t,a,s,i,o){const n=(0,r.g2)("progressbar"),l=(0,r.g2)("userDetails"),d=(0,r.g2)("preloader"),c=(0,r.g2)("loader"),u=(0,r.g2)("xButton");return(0,r.uX)(),(0,r.CE)("div",Ht,[(0,r.Lk)("header",Yt,[(0,r.Lk)("div",qt,[(0,r.bF)(n,{active:e.active&&!e.loading,onAnimationFinished:e.handleAnimationFinished},null,8,["active","onAnimationFinished"])]),(0,r.Lk)("div",Zt,[(0,r.bF)(l,{userName:e.sliderData.ownerLogin,avatarUrl:e.sliderData.ownerAvatar},null,8,["userName","avatarUrl"])])]),(0,r.Lk)("div",$t,[!1!==e.active||e.sliderData.content?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[e.loading?((0,r.uX)(),(0,r.CE)("div",ea,[(0,r.bF)(c)])):e.error?((0,r.uX)(),(0,r.CE)("div",ta)):e.sliderData.content?((0,r.uX)(),(0,r.CE)("div",{key:2,class:"slider-item__content",innerHTML:e.sliderData.content},null,8,aa)):(0,r.Q3)("",!0)],64)):((0,r.uX)(),(0,r.CE)("div",Vt,[(0,r.bF)(d,{count:3})]))]),(0,r.Lk)("p",sa,(0,L.v_)(e.errMessage),1),(0,r.Lk)("footer",ra,[(0,r.bF)(u,{loading:!0===e.sliderData.following.loading,type:e.sliderData.following.status?"gray":"green",onClick:t[0]||(t[0]=t=>e.$emit(e.sliderData.following.status?"removeStar":"setStar",e.sliderData.id))},{default:(0,r.k6)((()=>[(0,r.eW)((0,L.v_)(e.sliderData.following.status?"unfollow":"follow"),1)])),_:1},8,["loading","type"])])])}const oa=e=>((0,r.Qi)("data-v-60d3cb78"),e=e(),(0,r.jt)(),e),na=oa((()=>(0,r.Lk)("div",{class:"progressbar__indicator"},null,-1))),la=[na];function da(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",{class:(0,L.C4)(["progressbar",{__active:e.active}]),onAnimationend:t[0]||(t[0]=(...t)=>e.handleAnimationEnd&&e.handleAnimationEnd(...t))},la,34)}var ca=(0,r.pM)({name:"progressbar",props:{active:Boolean},methods:{handleAnimationEnd(){this.$emit("animationFinished")}}});const ua=(0,d.A)(ca,[["render",da],["__scopeId","data-v-60d3cb78"]]);var ga=ua;const ha={class:"x-button__btn-text"};function pa(e,t,a,s,i,o){const n=(0,r.g2)("loader");return(0,r.uX)(),(0,r.CE)("button",{class:(0,L.C4)(["x-button",[e.type,{__loading:e.loading}]]),onClick:t[0]||(t[0]=e=>this.$emit("handleClick"))},[(0,r.Lk)("span",ha,[e.loading?((0,r.uX)(),(0,r.Wv)(n,{key:0,color:"#fff",size:"24"})):(0,r.RG)(e.$slots,"default",{key:1},void 0,!0)])],2)}var va=(0,r.pM)({name:"xButton",components:{loader:ft},emits:["handleClick"],props:{type:{type:String,default:"green"},loading:{type:Boolean,default:!1}}});const ma=(0,d.A)(va,[["render",pa],["__scopeId","data-v-ad5035c8"]]);var _a=ma,fa=(0,r.pM)({name:"sliderItem",components:{progressbar:ga,xButton:_a,userDetails:Ue,preloader:$e,loader:ft},emits:["removeStar","setStar","animationFinished"],props:{active:Boolean,loading:Boolean,error:String,sliderData:Object},data(){return{isLiked:!1,errMessage:"",isLoading:!1}},methods:{handleAnimationFinished(){this.$emit("animationFinished")}}});const ka=(0,d.A)(fa,[["render",ia],["__scopeId","data-v-97f5e0a0"]]);var Sa=ka,La=(0,r.pM)({name:"stories",components:{logoLight:Jt,sliderItem:Sa,loader:ft},data(){return{activeSlide:0,activeSlideLoading:!1,sliderItemError:""}},computed:{...(0,n.aH)({posts:e=>e.posts}),...(0,n.L8)(["getUnstarredOnly"])},methods:{...(0,n.i0)({fetchPosts:"posts/fetchPosts",fetchReadme:"posts/fetchReadme",removeStar:"posts/removeStar",setStar:"posts/setStar"}),getDataForActiveSlide(e){return{id:e.id,ownerLogin:e.owner.login,ownerAvatar:e.owner.avatar_url,content:e.readme,following:e.following,error:this.sliderItemError}},switchToNextSlider(){this.activeSlide===this.getUnstarredOnly.length-1&&(this.activeSlide=-1),this.activeSlide++,this.moveSlider()},prevBtnClick(){this.activeSlide--,this.moveSlider()},nextBtnClick(){this.activeSlide++,this.moveSlider()},switchSlider(e){e!==this.activeSlide&&(this.activeSlide=e,this.moveSlider())},moveSlider(){this.$refs.sliderRow.style=`transform: translate(-${338*this.activeSlide}px);`,this.getActiveSlideData()},async getActiveSlideData(){this.activeSlideLoading=!0;try{const{id:e,owner:t,name:a}=this.getUnstarredOnly[this.activeSlide];await this.fetchReadme({id:e,owner:t.login,name:a})}catch{this.sliderItemError="readme файл не обнаружен"}finally{this.activeSlideLoading=!1}},close(){this.$router.go(-1)}},created(){this.activeSlide=Number(this.$route.params.initialSlide),this.fetchPosts().then((()=>{this.posts.error||this.moveSlider()}))}});const ya=(0,d.A)(La,[["render",Nt],["__scopeId","data-v-4170017a"]]);var wa=ya,Ea=a.p+"img/device.a10ff7a9.png",Aa=a.p+"img/device-tablet.9e45dde8.png",ba=a.p+"img/device-mobile.01003f98.png";const Ta=e=>((0,r.Qi)("data-v-5d6c40dc"),e=e(),(0,r.jt)(),e),Ca=Y+"#git",Da={class:"auth-page"},Ia={class:"auth-page__body"},Oa={class:"auth-page__text-content"},Xa=Ta((()=>(0,r.Lk)("p",null,[(0,r.eW)("More than just one repository."),(0,r.Lk)("br"),(0,r.eW)("This is our digital world.")],-1))),Ra=Ta((()=>(0,r.Lk)("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("use",{href:Ca,x:"0",y:"0"})],-1))),Fa={key:0,class:"auth-page__err-message"},Pa={class:"auth-page__img"},Ma={key:0,src:Ea,alt:"Gitogram"},Ua={key:1,src:Aa,alt:"Gitogram"},xa={key:2,src:ba,alt:"Gitogram"},Na=Ta((()=>(0,r.Lk)("footer",{class:"auth-page__footer"},[(0,r.Lk)("p",null,"© Gitogram from Loftschool")],-1)));function Ga(e,t,a,s,i,o){const n=(0,r.g2)("logo"),l=(0,r.g2)("xButton");return(0,r.uX)(),(0,r.CE)("div",Da,[(0,r.Lk)("div",Ia,[(0,r.Lk)("div",Oa,[(0,r.bF)(n),Xa,(0,r.bF)(l,{onClick:o.getCode},{default:(0,r.k6)((()=>[(0,r.eW)(" Authorize with github "),Ra])),_:1},8,["onClick"]),i.errMessage?((0,r.uX)(),(0,r.CE)("p",Fa,(0,L.v_)(i.errMessage),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Pa,[i.screenWidth>=768?((0,r.uX)(),(0,r.CE)("img",Ma)):(0,r.Q3)("",!0),i.screenWidth<768&&i.screenWidth>576?((0,r.uX)(),(0,r.CE)("img",Ua)):(0,r.Q3)("",!0),i.screenWidth<=576?((0,r.uX)(),(0,r.CE)("img",xa)):(0,r.Q3)("",!0)])]),Na])}var za={clientId:"69e245a82e427bdfefd7",clientSecret:"d6c3de2d69081043aa91270b3ea87d7194b4233b"},ja={name:"auth",components:{logo:H,xButton:_a},data(){return{screenWidth:window.innerWidth,errMessage:""}},methods:{updateScreenWidth(){this.screenWidth=window.innerWidth},getCode(){const e=new URL("https://github.com/login/oauth/authorize");e.searchParams.set("client_id",za.clientId),e.searchParams.set("scope","repo:status read:user"),window.location.href=e.href},async getToken(){const e=new URLSearchParams(window.location.search).get("code");if(e)try{const t="https://webdev-api.loftschool.com/github",a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:za.clientId,code:e,clientSecret:za.clientSecret})}),{token:s}=await a.json();localStorage.setItem("token",s),this.$router.replace({name:"home"})}catch{return void(this.errMessage="Ошибка при попытке авторизации")}}},created(){this.getToken(),window.addEventListener("resize",this.updateScreenWidth)},destroyed(){window.removeEventListener("resize",this.updateScreenWidth)}};const Qa=(0,d.A)(ja,[["render",Ga],["__scopeId","data-v-5d6c40dc"]]);var Ba=Qa;const Wa=[{path:"/",alias:"/home",name:"home",component:Lt},{path:"/stories/:initialSlide?",name:"stories",component:wa},{path:"/auth",name:"auth",component:Ba}],Ka=(0,g.aE)({history:(0,g.LA)("/"),routes:Wa});Ka.beforeEach((async(e,t,a)=>{if("auth"!==e.name)try{await S.dispatch("user/fetchUser"),a()}catch(s){console.log(s),a({name:"auth"})}else a()}));var Ja=Ka;(0,s.Ef)(u).use(S).use(Ja).mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,i){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],i=e[c][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,r,i]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],n=s[1],l=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var c=l(a)}for(t&&t(s);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(433)}));s=a.O(s)})();
//# sourceMappingURL=app.0df6b58f.js.map